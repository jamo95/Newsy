# COMP4920 Project: Summariser

## Usage

### Requirements

+ Python3
+ Virtualenv or similar (optional but recommended)

### Setup

Before setting up it is recommended that you have a Python3 environment setup and have activated it. If you need help with this look at [this documentation](http://docs.python-guide.org/en/latest/dev/virtualenvs)

Next you will need to run:

```bash
$ pip install -r requirements.txt
```

This will install all the Python dependencies required to run the Flask server.

Next we will need to install a Ruby dependency in order to build the SASS stylesheets into CSS. Make sure you have `ruby` installed, and `ruby-dev` if you're on linux, and then run:

```bash
$ sudo gen install sass
```

Finally you can run the Flask server by running:

```bash
$ python server.py
```

Now if you navigate to `localhost:5000` in your browser you should be able to see the Summariser site.

## Development

### Project Structure

```txt
app: Root application directory
├── static: Contains static assets
│   ├── build: Autogenerated static assets
│   ├── scripts: Javascript files
│   └── styles: SASS styling files
└── templates: Flask templates
└── views.py: Functions for returning templates as individual web pages
```

### Frontend

Firstly, we want to add our template if we are creating a new page. Templates are the HTML files, containing values that get filled in my Flask's templating engine Jinja. Each new page should follow the template:

```html
{% extends "base.html %}
{% block content %}

<div id="page-name" class="container">
  ...
</div>

<script type="text/javascript">
  ...
</script>

{% endblock %}
```

Once you have created your template file, we need to add a view function to return it. To do this go to `views.py`. At the time of writing it already has a function to return the index page.

```python
@app.route('/', methods=['GET'])
def index():
    return render_template('index.html')
```

Here we have a function that is attached to the route `/`. This should be changed to the path of your page, for example `/about` or `/graph`. Then in the function we return `render_template('template-name.html')`. In this function you should also pass in any variables that are required by the template, but [read this](http://flask.pocoo.org/docs/0.12/templating) documentation on templates to learn more about that.

Next we add any static assets you may need. In the `static` directory we have `scripts` which contains all our JS functions and `styles` which contains all our [SASS](http://sass-lang.com) style sheets.

Firstly with JS, to prevent namespace collisions, each page should have at most one javascript file of the same name. For example, the `index` page has a JS file `index.js`. This file will contain only functions used by the `index` page and they should all be named `indexSOMETHING`. You can then reference these functions in the `script` tags in your template.

Next we have styling. This is done using SASS to make life a little easier. Once again each page should have it's own `*.scss` file which contains the styles associated with that page. If you look back up to the template you'll notice that the outer div has the `id='page-name'`. This is used to help prevent namespace collisions and unwanted side effects from our styling. Take a look at `footer.scss` for a good example.

After any changes are made to the templates, script or styles, the Flask server will have to be restarted to rebuild the static assets and display the site. Sorry that this is a bit inconvenient but if anyone wants to build in some file watchers to do this automatically feel free :)

Finally, the main functionality, such as collecting and processing data, and interactions with the database should be done in the backend. These frontend view functions should just call the required backend functions to facilitate that.

### Backend

The backend functions will be called from the frontend functions. These functions which contain business and database logic should be split up into `*.py` files in a logical way. Then they can just be imported and called from the frontend functions.

When modifying backend functions only, the Flask server will automatically recognise any changes and restart the server for you.
