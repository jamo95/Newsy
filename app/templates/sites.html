{% extends "base.html" %}
{% block content %}
<body background="{{ url_for('static', filename='rocket.png') }}" style="background-repeat: no-repeat; background-attachment: fixed;">
  <div id="sites" class="container">
    {% if site %}
      <h1>{{ site }}</h1>

      {% for article_date in articles.keys() | sort(reverse=True) %}
        <h4>{{ article_date }}</h4>
        <ul>
            {% for article in articles.get(article_date) %}
              <li>
                <h3><a href="{{ url_for('summarised') + '?url=' + article.url }}">
                    {{ article.title }}
                </a></h3>

                {% for sentence in article.sentences[:2] | sort(attribute='index') %}
                  <p>{{ sentence['data'] }}</p>
                {% endfor %}
              </li>
            {% endfor %}
        </ul>
      {% endfor %}

      {% if page >= 2 %}
        <p><a href="{{ url_for('sites', site=site, page=page-1) }}">Previous</a></p>
      {% endif %}

      {% if page < max_page %}
        <p><a href="{{ url_for('sites', site=site, page=page+1) }}">Next</a></p>
      {% endif %}
    {% else %}
      <h1>Sites</h1>

      <ul>
        {% for site in sites %}
          <li><a href="/sites/{{ site }}">{{ site }}</a></li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
</body>
{% endblock %}
